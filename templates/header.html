<header class="fixed top-0 w-full z-50 text-[#755d46] shadow-sm backdrop-blur-md" style="background-color: rgba(255, 255, 255, 0.6);">
  <div class="w-full px-6 py-1 flex justify-between items-center max-w-7xl mx-auto" style="height: 56px;">
    <a href="/">
      <img src="{{ url_for('static', filename='img/logo.png') }}"
           alt="Bestern 로고"
           class="h-12 md:h-14 object-contain"
           style="max-height: 56px;" />
    </a>

    {% set path = request.path %}

    <!-- PC 메뉴 -->
    <nav class="hidden md:flex items-center space-x-8 text-[17px] font-semibold">
      <!-- 회사소개 -->
      <div class="group relative">
        <button class="group-hover:text-[#755d46] {{ 'text-[#755d46] font-bold' if path.startswith('/company') else 'text-[#442404]' }}" aria-haspopup="true">
          회사소개
        </button>
        <div class="absolute left-0 top-full mt-0 hidden group-hover:block bg-white shadow-lg rounded py-2 z-50 w-max whitespace-nowrap">
          <a href="/company/greeting" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">인사말</a>
          <a href="/company/overview" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">개요</a>
          <a href="/company/orgchart" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">조직도</a>
          <a href="/company/contact" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">연락처</a>
        </div>
      </div>

      <!-- 자산관리 -->
      <div class="group relative">
        <button class="group-hover:text-[#755d46] {{ 'text-[#755d46] font-bold' if path.startswith('/management') else 'text-[#442404]' }}" aria-haspopup="true">
          자산관리
        </button>
        <div class="absolute left-0 top-full mt-0 hidden group-hover:block bg-white shadow-lg rounded py-2 z-50 w-max whitespace-nowrap">
          <a href="/management/overview" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">개요</a>
          <a href="/management/orgchart" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">조직도</a>
          <a href="/management/secured" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">담보부 NPL</a>
          <a href="/management/unsecured" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">무담보 NPL</a>
          <a href="/management/performance" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">관리 실적</a>
          <a href="/management/board" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100 {{ 'text-[#755d46] font-bold' if path.startswith('/management/board') else 'text-[#442404]' }}">자료실</a>
        </div>
      </div>

      <!-- 자산운용 -->
      <div class="group relative">
        <button class="group-hover:text-[#755d46] {{ 'text-[#755d46] font-bold' if path.startswith('/operation') else 'text-[#442404]' }}" aria-haspopup="true">
          자산운용
        </button>
        <div class="absolute left-0 top-full mt-0 hidden group-hover:block bg-white shadow-lg rounded py-2 z-50 w-max whitespace-nowrap">
          <a href="/operation/philosophy" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">철학</a>
          <a href="/operation/orgchart" class="block px-4 py-2 hover:text-[#755d46] hover:bg-gray-100">조직도</a>
        </div>
      </div>

      <!-- 공시 및 공지 -->
      <a href="/notice" class="hover:text-[#755d46] {{ 'text-[#755d46] font-bold' if path.startswith('/notice') else 'text-[#442404]' }}">공시 및 공지</a>

      <!-- 채용 -->
      <a href="/recruit" class="hover:text-[#755d46] {{ 'text-[#755d46] font-bold' if path.startswith('/recruit') else 'text-[#442404]' }}">채용</a>

      <!-- 언어 변경 -->
      <button class="px-3 py-1 border border-[#755d46] rounded-md hover:bg-[#755d46] hover:text-white transition text-[#442404]">
        KO | EN
      </button>
    </nav>

    <!-- 모바일 햄버거 버튼 -->
    <button id="menuToggleBtn" onclick="toggleMobileMenu()" class="md:hidden text-[#755d46]" aria-label="모바일 메뉴 열기">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
      </svg>
    </button>
  </div>
</header>

<!-- 모바일 메뉴 -->
<div id="mobileMenu"
     class="md:hidden fixed inset-0 bg-[#1a1a1a]/85 backdrop-blur-sm text-white shadow-lg transform transition-transform duration-300 z-[9999] overflow-y-auto translate-x-full">
  <div class="relative p-6 pt-12 space-y-6 text-lg">
    <button onclick="toggleMobileMenu()" class="absolute top-4 right-4 w-10 h-10 flex items-center justify-center text-white text-2xl font-bold rounded-full bg-[#333] hover:bg-[#555]">✕</button>

    <!-- 회사소개 -->
    <div class="pt-4 border-t border-[#444]">
      <button onclick="toggleSubMenu('companySub')" class="w-full text-left py-2 font-semibold hover:text-[#c0b5ab]">회사소개</button>
      <div id="companySub" class="pl-4 mt-2 hidden space-y-2 text-base">
        <a href="/company/greeting" class="block hover:text-[#c0b5ab]">인사말</a>
        <a href="/company/overview" class="block hover:text-[#c0b5ab]">개요</a>
        <a href="/company/orgchart" class="block hover:text-[#c0b5ab]">조직도</a>
        <a href="/company/contact" class="block hover:text-[#c0b5ab]">연락처</a>
      </div>
    </div>

    <!-- 자산관리 -->
    <div class="pt-4 border-t border-[#444]">
      <button onclick="toggleSubMenu('managementSub')" class="w-full text-left py-2 font-semibold hover:text-[#c0b5ab]">자산관리</button>
      <div id="managementSub" class="pl-4 mt-2 hidden space-y-2 text-base">
        <a href="/management/overview" class="block hover:text-[#c0b5ab]">개요</a>
        <a href="/management/orgchart" class="block hover:text-[#c0b5ab]">조직도</a>
        <a href="/management/secured" class="block hover:text-[#c0b5ab]">담보부 NPL</a>
        <a href="/management/unsecured" class="block hover:text-[#c0b5ab]">무담보 NPL</a>
        <a href="/management/performance" class="block hover:text-[#c0b5ab]">관리 실적</a>
        <a href="/management/board"
           class="block hover:text-[#c0b5ab] {{ 'text-[#c0b5ab] font-bold' if path.startswith('/management/board') else '' }}">자료실</a>
      </div>
    </div>

    <!-- 자산운용 -->
    <div class="pt-4 border-t border-[#444]">
      <button onclick="toggleSubMenu('operationSub')" class="w-full text-left py-2 font-semibold hover:text-[#c0b5ab]">자산운용</button>
      <div id="operationSub" class="pl-4 mt-2 hidden space-y-2 text-base">
        <a href="/operation/philosophy" class="block hover:text-[#c0b5ab]">철학</a>
        <a href="/operation/orgchart" class="block hover:text-[#c0b5ab]">조직도</a>
      </div>
    </div>

    <!-- 공시 및 공지 -->
    <div class="pt-4 border-t border-[#444]">
      <a href="/notice" class="block w-full text-left py-2 font-semibold hover:text-[#c0b5ab]">공시 및 공지</a>
    </div>

    <!-- 채용 -->
    <div class="pt-4 border-t border-[#444]">
      <a href="/recruit" class="block w-full text-left py-2 font-semibold hover:text-[#c0b5ab]">채용</a>
    </div>

    <!-- 언어 변경 -->
    <button class="block mt-4 px-4 py-2 border rounded text-[#c0b5ab] border-[#c0b5ab] hover:bg-[#755d46] hover:text-white transition w-full">
      언어 전환: KO | EN
    </button>
  </div>
</div>

<script>
  function toggleMobileMenu() {
    const menu = document.getElementById("mobileMenu");
    if (window.innerWidth >= 768) {
      menu.classList.add("translate-x-full");
      menu.classList.remove("translate-x-0");
      return;
    }
    menu.classList.toggle("translate-x-full");
    menu.classList.toggle("translate-x-0");
  }

  function toggleSubMenu(id) {
    const subMenu = document.getElementById(id);
    subMenu.classList.toggle("hidden");
  }

  document.addEventListener("click", function (e) {
    const menu = document.getElementById("mobileMenu");
    const toggleBtn = document.getElementById("menuToggleBtn");
    if (window.innerWidth >= 768 || (
        menu && toggleBtn &&
        !menu.classList.contains("translate-x-full") &&
        !menu.contains(e.target) &&
        !toggleBtn.contains(e.target))) {
      menu.classList.add("translate-x-full");
      menu.classList.remove("translate-x-0");
    }
  });
</script>